<script>
  import { onMount } from 'svelte';

  let path;
  let pathLength = 0;
  const triggerOffset = 410; // point where animation begins

  onMount(() => {
    if (!path) return;

    pathLength = path.getTotalLength();
    path.style.strokeDasharray = pathLength;
    path.style.strokeDashoffset = pathLength;

    const handleScroll = () => {
      const scrollTop = window.scrollY;
      const startScroll = triggerOffset; // animation start point
      const endScroll = document.documentElement.scrollHeight - window.innerHeight;
      const scrollableRange = endScroll - startScroll;

      // Calculate progress after triggerOffset
      const scrolled = scrollTop - startScroll;
      const scrollPercent = scrolled / scrollableRange;
      const clampedPercent = Math.min(Math.max(scrollPercent, 0), 1);

      path.style.strokeDashoffset = pathLength * (1 - clampedPercent);
    };

    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  });
</script>


<div class="wrapper">
    <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 1334.55 3461.6"
        height="3461.6"
        width="1440"
    >
        <path
            bind:this={path}
            id="drawPath"
            class="cls-1"
            d="M10.03,0c0,32.36,0,106.54,0,117.49,0,7.92,0,15.85,0,23.77,0,11.82,0,23.65.01,35.47,0,14.6,0,29.19.01,43.79,0,16.24.01,32.47.02,48.71,0,16.75.01,33.49.02,50.24,0,16.12.01,32.25.02,48.37,0,14.33,0,28.67.01,43,0,11.5,0,23.01.01,34.51,0,7.48,0,14.96,0,22.44,0,.89-.62,3.05,0,5.72.92,3.96,3.68,6.74,5.94,8.51,19.22,20.92,38.44,41.84,57.66,62.75,49.94,53.62,88.03,92.59,102.26,106.18,2.99,2.86,10.52,9.92,22.27,15,12.61,5.46,22.66,5.35,24.95,5.36,17.6.11,32.24-8.89,41.21-24.09,10.44-17.7,7.84-40.57-5.5-55.94-14.55-16.76-38.41-21.2-57.96-11.12-9.96,5.14-15.78,12.47-20.26,18.68-14.6,20.19-25.56,42.42-31.07,54.31-16.37,34.08-32.74,68.17-49.1,102.25-2.82,6.46-9.14,18.44-22.09,27.42-3.31,2.29-8.09,5.55-14.95,7.39-15.16,4.07-33.66-.61-46.01-13.5-2.76-2.89-14.1-15.46-13.62-33.82.64-24.71,22.29-46.12,44.52-47.35,15.22-.84,27.23,7.97,30.23,10.17,10.23,7.5,15.12,16.87,16.94,20.27,9.85,18.42,29.25,47.9,59.2,90.32,177.18-1.72,354.36-3.45,531.54-5.17,181.69.58,363.38,1.15,545.08,1.73,37.93,2.74,71.75-13.4,85.77-41.36,7.35-14.65,7.66-29.35,6.73-39.2,0,0,0-50.7-51.83-47.99,0,0-42.52,1.35-46.51,52.76l2.66,392.71c.43,33.42.87,66.83,1.3,100.25-2.1,37.95-9.74,102.08-40.06,161.91-16.48,32.53-31.83,48.33-48.42,58.87-19.5,12.39-38.8,16.29-51.19,17.66H325.03c-22.52,7.94-37.96,27-38.87,47.7-.48,10.95,2.96,25.58,13.91,36.21,9.23,8.96,19.92,11.32,24.3,12.01,10.47,1.65,18.85-.83,22.83-2.31,6.9-2.55,16.14-7.31,22.89-16.55,8.52-11.67,8.97-24.86,9.1-30.86.52-24.7,1.06-107.71,0-220.86l-.94-24.93c.05-4.35.72-9.4,3.13-14.53,2.27-4.83,5.81-9.19,10.75-12.85,9.54-6.18,19.08-11.48,30.36-11.48,247.22.88,464.96-3.53,713.05,1.77,7.81,0,16.48,2.65,19.95,10.6,8.64,11.99,12.79,23.3,12.79,45.92,0,166.95-2.07,333.83-4.88,501.09l71.55,74.04c2.79,6.4,9.05,18.26,21.88,27.15,3.27,2.27,8.02,5.5,14.8,7.32,15.01,4.03,33.33-.6,45.56-13.37,2.74-2.86,13.96-15.31,13.49-33.49-.63-24.47-22.07-45.67-44.08-46.89-15.07-.83-26.96,7.89-29.94,10.07-9.5,6.96-14.49,15.43-16.78,20.07l-111.07,167.4s-14.47,28.13-51.32,29.47c-36.84,1.34-697.26,0-697.26,0,0,0-106.58-12.13-102.63-71.7,0,0,0-50.2,51.32-47.52,0,0,42.11,1.34,46.05,52.25l.37,98.8-2.15,54.66s-.72,77.38,91.19,71.64c91.91-5.74,627.32.3,627.32.3h166.98s52.09-4.9,55.91,44.89c3.83,49.79,3.87,88.27,3.87,88.27,0,7.07,0,14.14,0,21.21,0,10.55,0,21.1-.01,31.65,0,13.02,0,26.05-.01,39.07,0,14.49,0,28.97-.01,43.46,0,14.94,0,29.88-.01,44.82,0,14.39,0,28.77-.01,43.16,0,12.79,0,25.58-.01,38.37,0,10.26,0,20.53-.01,30.79,0,6.67,0,13.35,0,20.02,0,.79.55,2.72,0,5.1-.82,3.54-3.27,6.02-5.28,7.59-17.07,18.66-34.14,37.33-51.21,55.99-44.35,47.84-78.17,82.62-90.81,94.74-2.66,2.55-9.34,8.85-19.77,13.38-11.2,4.87-20.12,4.77-22.16,4.79-15.63.09-28.63-7.93-36.59-21.5-9.27-15.79-6.96-36.2,4.89-49.91,12.92-14.95,34.11-18.92,51.47-9.92,8.84,4.58,14.01,11.13,17.99,16.67,12.96,18.01,22.7,37.85,27.59,48.46,14.53,30.41,29.07,60.82,43.6,91.23,2.5,5.76,8.12,16.46,19.62,24.46,2.94,2.05,7.19,4.95,13.28,6.6,13.46,3.63,29.89-.54,40.86-12.05,2.45-2.58,12.52-13.79,12.1-30.18-.57-22.05-19.8-41.15-39.53-42.25-13.51-.75-24.18,7.11-26.85,9.07-9.08,6.69-13.43,15.05-15.05,18.09-8.75,16.43-25.97,42.74-52.57,80.59-157.34-1.54-314.67-3.08-472.01-4.62-161.34.51-322.69,1.03-484.03,1.54-33.68,2.45-63.71-11.96-76.16-36.91-6.52-13.07-6.8-26.19-5.98-34.98,0,0,0-45.24,46.02-42.82,0,0,37.76,1.21,41.3,47.08l-2.36,350.4c-.38,29.82-.77,59.63-1.15,89.45,1.86,33.86,8.65,91.08,35.57,144.47"
        />
    </svg>
</div>

<style>

    .wrapper {
      position: sticky;
    top: 1167px;
    }


    svg {
        position: absolute;
        top: 0;
        left: 0;
        width: 1440px;
        pointer-events: none;
        transition: all 0.5s ease;
    }

    .cls-1 {
        fill: none;
        stroke: #dad2c3;
        stroke-miterlimit: 10;
        stroke-width: 7.71px;
        stroke-dasharray: 0;
        stroke-dashoffset: 0;
        transform-origin: center;
    }
</style>
